#!/usr/bin/env r

if (is.null(argv) | length(argv) > 1) {
  cat("Usage: run.pipeline pipeline.config.yml submitter\n")
  cat("\n")
  cat("Both arguments are needed!\n")
  cat("\n")
  q()
}

pipeline <- normalizePath(argv[[1]])
submitter <- argv[[2]]

setwd("/home/rstudio/LEEF")

options(mc.cores = parallel::detectCores() - 1)

library(LEEF)

LEEF::initialize(argv[[1]])

LEEF::process("RMK")

